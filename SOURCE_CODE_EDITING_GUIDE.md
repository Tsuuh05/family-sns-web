# ソースコード編集ガイド

このガイドでは、ソースコードをどこで、どのように編集するかを説明します。

## 目次

1. [ソースコードの取得方法](#ソースコードの取得方法)
2. [推奨される編集環境](#推奨される編集環境)
3. [プロジェクト構造の理解](#プロジェクト構造の理解)
4. [編集後のデプロイ方法](#編集後のデプロイ方法)

---

## ソースコードの取得方法

ソースコードを編集するには、まずコードをダウンロードする必要があります。

### 方法 1: Manus 管理画面からダウンロード（推奨）

Manus の管理画面から、プロジェクト全体を ZIP ファイルとしてダウンロードできます。

**手順:**

1. Manus の管理画面（右側のパネル）を開く
2. **「Code」** タブをクリック
3. 右上の **「Download All Files」** ボタンをクリック
4. ZIP ファイルがダウンロードされるので、任意の場所に解凍

### 方法 2: GitHub からクローン

既に GitHub にアップロード済みの場合は、GitHub からクローンできます。

**手順（GitHub Desktop を使用）:**

1. GitHub Desktop を起動
2. **「File」** → **「Clone repository」** をクリック
3. リポジトリ一覧から `family-sns-web` を選択
4. **「Clone」** をクリック
5. ローカルにコードがダウンロードされます

**手順（コマンドライン）:**

```bash
git clone https://github.com/your-username/family-sns-web.git
cd family-sns-web
```

---

## 推奨される編集環境

ソースコードを編集するには、コードエディタが必要です。

### Visual Studio Code（推奨）

Visual Studio Code（VS Code）は、無料で高機能なコードエディタです。

**インストール手順:**

1. https://code.visualstudio.com にアクセス
2. 「Download for Windows/Mac」をクリックしてダウンロード
3. インストーラーを実行
4. インストール完了後、VS Code を起動

**プロジェクトを開く:**

1. VS Code を起動
2. **「File」** → **「Open Folder」** をクリック
3. ダウンロードしたプロジェクトフォルダを選択
4. フォルダが開かれ、左側にファイル一覧が表示されます

**推奨拡張機能:**

VS Code の拡張機能をインストールすると、より快適に編集できます。

1. VS Code の左サイドバーの **「Extensions」**（四角いアイコン）をクリック
2. 以下の拡張機能を検索してインストール

| 拡張機能名 | 説明 |
|---|---|
| **ESLint** | JavaScript/TypeScript のエラーチェック |
| **Prettier** | コードの自動整形 |
| **Tailwind CSS IntelliSense** | Tailwind CSS の補完機能 |

### その他のエディタ

以下のエディタも使用できます。

- **Sublime Text**: https://www.sublimetext.com
- **Atom**: https://atom.io
- **WebStorm**: https://www.jetbrains.com/webstorm （有料）

---

## プロジェクト構造の理解

プロジェクトのフォルダ構造を理解することで、どのファイルを編集すればよいかがわかります。

### フォルダ構造

```
family-sns-web/
├── client/                    # フロントエンド（ブラウザで動作する部分）
│   ├── public/               # 静的ファイル（画像、robots.txt など）
│   │   └── robots.txt        # 検索エンジン制御ファイル
│   ├── src/                  # ソースコード
│   │   ├── pages/            # 各ページのコンポーネント
│   │   │   ├── Home.tsx      # ホーム画面（投稿一覧）
│   │   │   ├── Auth.tsx      # 認証画面（ログイン・招待コード入力）
│   │   │   └── PostDetail.tsx # 投稿詳細画面（コメント表示）
│   │   ├── components/       # 再利用可能な UI コンポーネント
│   │   │   └── ui/           # shadcn/ui コンポーネント
│   │   ├── lib/              # ライブラリ設定
│   │   │   └── trpc.ts       # tRPC クライアント設定
│   │   ├── App.tsx           # ルーティング設定
│   │   ├── main.tsx          # アプリのエントリーポイント
│   │   ├── index.css         # グローバル CSS（色、フォントなど）
│   │   └── const.ts          # 定数（アプリ名、ロゴなど）
│   └── index.html            # HTML テンプレート
├── server/                    # バックエンド（サーバー側の処理）
│   ├── routers.ts            # tRPC ルーター（API エンドポイント）
│   ├── db.ts                 # データベース操作関数
│   └── _core/                # フレームワークのコア機能（通常は編集不要）
├── drizzle/                   # データベーススキーマ
│   └── schema.ts             # テーブル定義
└── shared/                    # フロントエンドとバックエンドで共有するコード
    └── const.ts              # 共有定数
```

### 編集頻度の高いファイル

初心者の方が編集する可能性が高いファイルは以下の通りです。

| ファイルパス | 説明 | 編集例 |
|---|---|---|
| `client/src/pages/Home.tsx` | ホーム画面 | 投稿一覧の表示方法を変更 |
| `client/src/pages/Auth.tsx` | 認証画面 | 招待コード入力画面のデザイン変更 |
| `client/src/pages/PostDetail.tsx` | 投稿詳細画面 | コメント表示方法を変更 |
| `client/src/index.css` | グローバルスタイル | 色、フォント、背景色を変更 |
| `client/src/const.ts` | アプリ設定 | アプリ名、ロゴを変更 |
| `server/routers.ts` | API エンドポイント | 新しい機能を追加 |
| `drizzle/schema.ts` | データベーススキーマ | 新しいテーブルや列を追加 |

---

## 編集後のデプロイ方法

ソースコードを編集した後、変更を反映させるには、GitHub にプッシュして Vercel が自動的に再デプロイするのを待ちます。

### 方法 1: GitHub Desktop を使用（推奨）

**手順:**

1. ファイルを編集して保存
2. GitHub Desktop を起動
3. 左側に変更されたファイルの一覧が表示されます
4. 左下の **「Summary」** に変更内容の要約を入力（例: 「ホーム画面のデザインを変更」）
5. **「Commit to main」** ボタンをクリック
6. 上部の **「Push origin」** ボタンをクリック
7. GitHub にコードがアップロードされます
8. Vercel が自動的に再デプロイを開始します（1〜3分）
9. Vercel のダッシュボードで進行状況を確認できます

### 方法 2: コマンドラインを使用

**手順:**

```bash
# 変更をステージング
git add .

# コミット
git commit -m "ホーム画面のデザインを変更"

# GitHub にプッシュ
git push origin main
```

### デプロイの確認

**手順:**

1. Vercel のダッシュボード（https://vercel.com/dashboard）を開く
2. プロジェクトをクリック
3. **「Deployments」** タブで、最新のデプロイ状況を確認
4. **「Ready」** と表示されたら、デプロイ完了
5. アプリの URL にアクセスして、変更が反映されているか確認

---

## ローカルでの開発（上級者向け）

ローカル環境でアプリを実行すると、変更をすぐに確認できます。

### 必要なツールのインストール

**Node.js のインストール:**

1. https://nodejs.org にアクセス
2. **「LTS」**（推奨版）をダウンロードしてインストール
3. インストール完了後、ターミナル（Windows は PowerShell）を開いて確認

```bash
node --version
# v20.x.x などと表示されれば成功
```

**pnpm のインストール:**

```bash
npm install -g pnpm
```

### ローカルサーバーの起動

**手順:**

1. ターミナルでプロジェクトフォルダに移動

```bash
cd path/to/family-sns-web
```

2. 依存関係をインストール

```bash
pnpm install
```

3. 環境変数を設定

プロジェクトルートに `.env` ファイルを作成し、以下を記述

```
DATABASE_URL=your_supabase_connection_string
```

4. 開発サーバーを起動

```bash
pnpm dev
```

5. ブラウザで http://localhost:3000 にアクセス
6. ファイルを編集すると、自動的にブラウザが更新されます

### 開発サーバーの停止

ターミナルで `Ctrl + C` を押すと、サーバーが停止します。

---

## よくある質問

### Q: ファイルを編集したが、変更が反映されない

**A:** 以下を確認してください。

1. ファイルを保存したか確認
2. GitHub にプッシュしたか確認
3. Vercel のデプロイが完了したか確認（Vercel ダッシュボードで確認）
4. ブラウザのキャッシュをクリア（`Ctrl + Shift + R` または `Cmd + Shift + R`）

### Q: VS Code でエラーが表示される

**A:** 以下を試してください。

1. プロジェクトフォルダで `pnpm install` を実行
2. VS Code を再起動
3. TypeScript のバージョンを確認（VS Code の右下に表示）

### Q: Git の使い方がわからない

**A:** GitHub Desktop を使用することをお勧めします。GUI で直感的に操作できます。

### Q: ローカルで開発する必要はあるか

**A:** 小さな変更であれば、GitHub で直接ファイルを編集することもできます。ただし、大きな変更や複数のファイルを編集する場合は、ローカル環境での開発をお勧めします。

---

## まとめ

ソースコードの編集は、以下の流れで行います。

1. **コードをダウンロード**（Manus 管理画面または GitHub）
2. **VS Code などのエディタで編集**
3. **GitHub にプッシュ**（GitHub Desktop またはコマンドライン）
4. **Vercel が自動的に再デプロイ**

この流れを覚えれば、自由にアプリをカスタマイズできます。
